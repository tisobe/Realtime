Robert Cameron
November 1999

Updated Feb 24, 2014    by t. isobe (tisobe@cfa.harvard.edu)

Thiis directory contains an up-to-date version of the Chandra ephemeris file, 
and a estimated ephemeris point.

Dir: /data/mta4/proj/rac/ops/ephem/
See also: https://cxc.cfa.harvard.edu/mta_days/mta_script_list/Realtime/bs_ephemeris.html

ephem.pl
--------
    copies the latest ephemeris file:
               from latest Predictive Ephemeris files, derived from JPL
               ranging data. Typically updated every 3-4 days (but
               sometimes less frequently). The PE file is copied from
               /dsops/GOT/aux/ on psicorp contains Chandra state vectors
               at 5-minute intervals, for several day periods.
               State vectors are ECI x,y,z position and x,y,z velocity.

    then runs following scripts:

        ephem.idl

        geopack/cocochan
    
        /data/mta4/proj/rac/ops/CRM/runcrm
        /data/mta4/proj/rac/ops/CRM2/runcrm
        /data/mta4/proj/rac/ops/CRM3/runcrm
    
        solun_eph
    
        gsme_plots.idl  --- this script is currently not working.



ephem.idl
----------
    runs two idl scripts:
        read_ephemeris.pro
        lephem.pro

read_ephemeris.pro
------------------
    convert a data format of PE.EPH to suitable to farther processing with lephem.pro
    
lephem.pro
-----------
    convert a Chandra ephemeris file to ASCII

        input  -    /data/mta4/proj/rac/ops/ephem/PE.EPH

        output -    /data/mta4/proj/rac/ops/ephem/PE.EPH.dat0

geopack/cocochan
----------------
    Converting ECI to GSE,GSM coords.
               This uses the GEOPACK FORTRAN package (see below)  to do the conversion.

        input  -     /data/mta4/proj/rac/ops/ephem/PE.EPH.dat (ECI state vectors)
        output  -    /data/mta4/proj/rac/ops/ephem/PE.EPH.gsme 
                            (GSE, GSM in spherical coords)
                     /data/mta4/proj/rac/ops/ephem/PE.EPH.gsme_in_Re 
                            (GSE, GSM in cartesian coords, in units of Earth radii)

gsme_plots.idl
--------------
    runs cheph.pro

cheph.pro
---------
    GSE and GSM plots: IDL procedure ---- this script is currently not working.
        rac_arread.pro
        timeconv.pro

        input  -  /data/mta4/proj/rac/ops/ephem/PE.EPH.gsme
        output -  GSE.gif, GSM.gif

solun_eph
---------
    calculate solar and lunar geocentric ephemerides for Chandra ephemeris times read from a file
    Uses the JPL DE405 ephemeris, and JPL code.

    this is a fortran code

    input -     lnxp1600p2200.405 (see: http://ssd.jpl.nasa.gov/?planet_eph_export)
                PE.EPH.dat

    output -    solun_eph.dat


/data/mta4/proj/rac/ops/CRM/runcrm
----------------------------------
    calculate CRM proton flux for Chandra ephemeris read from a file, 
    for all 28 possible values of Kp.

    fortran code in /data/mta4/prjo/rac/ops/CRM/v1.2/runcrm.f

        input  - /data/mta4/proj/rac/ops/ephem/PE.EPH.gsme_in_Re

        output - /data/mta4/proj/rac/ops/CRM/CRM_p.dat


/data/mta4/proj/rac/ops/CRM2/runcrm
------------------------------------
    calculate CRM proton flux for Chandra ephemeris read from a file, 
    for all 28 possible values of Kp.

    fortran code in /data/mta4/prjo/rac/ops/CRM/v26apr2004/runcrm.f

        input  - /data/mta4/proj/rac/ops/ephem/PE.EPH.gsme_in_Re

        output - /data/mta4/proj/rac/ops/CRM2/CRM2_p.dat


/data/mta4/proj/rac/ops/CRM3/runcrm
------------------------------------
    calculate CRM proton flux for Chandra ephemeris read from a file, 
    for all 28 possible values of Kp.

    fortran code in /data/mta4/prjo/rac/ops/CRM3/RUNCRM/runcrm.f

        input  - /data/mta4/proj/rac/ops/ephem/PE.EPH.gsme_in_Re

        output - /data/mta4/proj/rac/ops/CRM3/CRM3_p.dat


gephem.pl
---------
    Interpolate data from the ephemeris file

    input  - PE.EPH.dat

    output - gephem.dat

longterm/dephem.pl
------------------
    long-term files of the Chandra definitive ephemeris (supposedly more accurate
    than the predictive ephemeris, but not much difference really).
    Generated by dephem.pl. Good for the entire Chandra mission.
    The corresponding GSE and GSM files are not updated regularly, but can
    be brought up to date at any time with the fortran program cocochan_de.f

+++++++
geopack
+++++++
    this directory contains fortran codes convert Chandra ECI linear coords to GSE, ESE coods.
    cocochan.f  is written by Robrt Cameron and does the job

    geopack.f   this is an updated version of original GEOPACK.f. most subroutines are there
                with _08 saffix, but a couple of the original subroutines were missing and
                substituted by others. 
                this one need to be update soon again as the estimation runs out soon.
                geopack site:  http://geo.phys.spbu.ru/~tsyganenko/modeling.html


    supple.f    this is a partial copy of CRMFLX_V33.f, since CRMFLX_V33.f requires a few
                subroutines which are not found in the system. 

        f77 cocochan.f geopack.f supple.f -o cocochan



cron job
---------
22 2 * * *  /data/mta4/proj/rac/ops/ephem/TLE/get_tle.pl   
21 3 * * *  /data/mta4/proj/rac/ops/ephem/ephem.pl        
*  * * * *  /data/mta4/proj/rac/ops/ephem/gephem.pl      
41 3 * * 0  /data/mta4/proj/rac/ops/ephem/longterm/dephem.pl 

